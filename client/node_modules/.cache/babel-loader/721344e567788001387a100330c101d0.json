{"ast":null,"code":"var _jsxFileName = \"/Users/ray-ez/Desktop/strayChat/client/src/components/Chat/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport io from 'socket.io-client';\nlet socket;\n\nconst Chat = ({\n  location\n}) => {\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const EndPoint = 'localhost:5000';\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    socket = io(EndPoint);\n    setName(name);\n    setRoom(room);\n    console.log(name, room); // Params : first is the event , second is the data we we want to pass, \n    //third is callback for error handling stuff \n\n    socket.emit('join', {\n      name,\n      room\n    }, () => {});\n    return () => {\n      // Emitting event name should be same on server side \n      socket.emit('disconnet');\n      socket.off();\n    };\n  }, [EndPoint, location.search]);\n  useEffect(() => {\n    socket.on('message', message => {\n      setMessages([...messages, message]);\n    }, [messages]);\n  });\n\n  const sendMessage = event => {\n    if (message) {\n      socket.emit('sendMessage', message, () => setMessage(``));\n    }\n\n    event.preventDefault();\n  };\n\n  console.log(message, messages);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: message,\n    onChange: event => setMessage(event.target.value),\n    onKeyPress: event => event.key === 'Enter' ? sendMessage(event) : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/ray-ez/Desktop/strayChat/client/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","queryString","io","socket","Chat","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","EndPoint","parse","search","console","log","emit","off","on","sendMessage","event","preventDefault","target","value","key"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,EAAP,MAAe,kBAAf;AAEA,IAAIC,MAAJ;;AACA,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAC3B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMe,QAAQ,GAAG,gBAAjB;AAEAd,EAAAA,SAAS,CAAC,MAAI;AACV,UAAM;AAACM,MAAAA,IAAD;AAAOE,MAAAA;AAAP,QAAeP,WAAW,CAACc,KAAZ,CAAkBV,QAAQ,CAACW,MAA3B,CAArB;AAEAb,IAAAA,MAAM,GAAGD,EAAE,CAACY,QAAD,CAAX;AACAP,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAG,IAAAA,OAAO,CAACD,IAAD,CAAP;AAEAS,IAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ,EAAkBE,IAAlB,EAPU,CAQV;AACA;;AACAL,IAAAA,MAAM,CAACgB,IAAP,CAAY,MAAZ,EAAmB;AAACb,MAAAA,IAAD;AAAME,MAAAA;AAAN,KAAnB,EAAgC,MAAI,CAAE,CAAtC;AAGA,WAAO,MAAI;AACP;AACAL,MAAAA,MAAM,CAACgB,IAAP,CAAY,WAAZ;AAEAhB,MAAAA,MAAM,CAACiB,GAAP;AACH,KALD;AAMH,GAnBQ,EAmBN,CAACN,QAAD,EAAWT,QAAQ,CAACW,MAApB,CAnBM,CAAT;AAqBAhB,EAAAA,SAAS,CAAC,MAAK;AACXG,IAAAA,MAAM,CAACkB,EAAP,CAAU,SAAV,EAAsBX,OAAD,IAAW;AAC5BG,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAcF,OAAd,CAAD,CAAX;AACH,KAFD,EAEG,CAACE,QAAD,CAFH;AAGH,GAJQ,CAAT;;AAMA,QAAMU,WAAW,GAAIC,KAAD,IAAS;AACzB,QAAGb,OAAH,EAAW;AACPP,MAAAA,MAAM,CAACgB,IAAP,CAAY,aAAZ,EAA2BT,OAA3B,EAAoC,MAAKC,UAAU,CAAE,EAAF,CAAnD;AACH;;AACDY,IAAAA,KAAK,CAACC,cAAN;AACH,GALD;;AAOAP,EAAAA,OAAO,CAACC,GAAR,CAAYR,OAAZ,EAAqBE,QAArB;AACA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,KAAK,EAAEF,OAAd;AAAuB,IAAA,QAAQ,EAAIa,KAAD,IAAUZ,UAAU,CAACY,KAAK,CAACE,MAAN,CAAaC,KAAd,CAAtD;AACA,IAAA,UAAU,EAAIH,KAAK,IAAIA,KAAK,CAACI,GAAN,KAAc,OAAd,GAAwBL,WAAW,CAACC,KAAD,CAAnC,GAA4C,IADnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ;AAOH,CAjDD;;AAmDA,eAAenB,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport queryString from 'query-string';\nimport io from 'socket.io-client';\n\nlet socket;\nconst Chat = ({ location }) => {\n    const [name, setName] = useState('');\n    const [room, setRoom] = useState('');\n    const [message, setMessage] = useState('');\n    const [messages, setMessages] = useState([]);\n    const EndPoint = 'localhost:5000';\n\n    useEffect(()=>{\n        const {name, room} = queryString.parse(location.search);\n\n        socket = io(EndPoint)\n        setName(name);\n        setRoom(room);\n\n        console.log(name, room);\n        // Params : first is the event , second is the data we we want to pass, \n        //third is callback for error handling stuff \n        socket.emit('join',{name,room}, ()=>{}\n        );\n        \n        return ()=>{\n            // Emitting event name should be same on server side \n            socket.emit('disconnet');\n            \n            socket.off();\n        }\n    }, [EndPoint, location.search]);\n\n    useEffect(()=> {\n        socket.on('message', (message)=>{\n            setMessages([...messages, message]);\n        }, [messages]);\n    });\n\n    const sendMessage = (event)=>{\n        if(message){\n            socket.emit('sendMessage', message, ()=> setMessage(``));\n        }\n        event.preventDefault();\n    }\n\n    console.log(message, messages);\n    return(\n        <div>\n            <input value={message} onChange={ (event)=> setMessage(event.target.value)} \n            onKeyPress= { event => event.key === 'Enter' ? sendMessage(event): null}\n            />     \n        </div>\n    )\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}